<?xml version="1.0"?>
<odoo>
    <!--INHERIT-->
    <record model="ir.ui.view" id="view_sale_order_carrier_search">
        <field name="name">sale.order.carrier.search</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_sales_order_filter"/>
        <field name="arch" type="xml">
            <field name="user_id" position="after">
                <field name="master_tracking_id" />
                <field name="system_reference_id" />
                <field name="carrier_soap_state" />
                <field name="delivery_soap_state" />
            </field>
            <xpath expr="/search/group/filter[2]" position="after">
                <filter string="Carrier state" domain="[]" context="{'group_by': 'carrier_soap_state'}"/>
                <filter string="Carrier delivery state" domain="[]" context="{'group_by': 'delivery_soap_state'}"/>
            </xpath>
        </field>
    </record>
    <record model="ir.ui.view" id="view_sale_order_tracking_form">
        <field name="name">sale.order.form</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="green_logistic_carrier.view_sale_order_form"/>
        <field name="arch" type="xml">
            <button name="set_carrier_ok_no" position="after">
                 <button name="set_carrier_confirmed" string="Confirmed to Carrier" type="object" attrs="{'invisible': [('carrier_soap_state', '!=', 'pending')]}" icon="fa-thumbs-up" colspan="1"/>
            </button>
            <field name="carrier_track_id" position="after">
                <field name="master_tracking_id" /><!--readonly="1"-->
                <field name="system_reference_id" readonly="1"/>

                <field name="carrier_soap_state" /><!--TODO readonly="1"-->
                <field name="delivery_soap_state" readonly="1"/>

                <field name="carrier_ok" />   <!--TODO invisible="1"-->
                <field name="shipper_type" />
                <button name="shipments_list_request_detail_source" type="object" string="Check MBE information"/>
            </field>
        </field>
    </record>
    <record id="carrier_connection_soap_view_tree" model="ir.ui.view">
        <field name="name">carrier_connection_soap_view_tree</field>
        <field name="model">carrier.connection.soap</field>
        <field name="arch" type="xml">
            <tree string="Carrier SOAP Connection">
                <field name="name"/>
                <field name="company_id"/>
                <field name="wsdl_root"/>
                <field name="username"/>
                <field name="passphrase" invisible="1"/>
                <field name="system"/>
                <field name="internal_reference"/>
                <field name="customer_id"/>
                <field name="store_id"/>
                <field name="sam_id"/>
                <field name="department_id"/>
            </tree>
        </field>
    </record>
    <record id="carrier_connection_soap_view_form" model="ir.ui.view">
        <field name="name">carrier_connection_soap_view_form</field>
        <field name="model">carrier.connection.soap</field>
        <field name="arch" type="xml">
            <form string="Carrier SOAP Connection">
                <header>

                </header>
                <sheet>
                    <group col="4" colspan="4">
                        <field name="name"/>
                        <field name="company_id"/>

                        <field name="wsdl_root" colspan="4"/>

                        <field name="username"/>
                        <field name="passphrase" />

                        <field name="system"/>
                        <field name="internal_reference"/>

                        <field name="customer_id"/>
                        <field name="store_id"/>

                        <field name="sam_id"/>
                        <field name="department_id"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
    <record id="carrier_connection_soap_action" model="ir.actions.act_window">
        <field name="name">Carrier SOAP Connection</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">carrier.connection.soap</field>
        <field name="view_mode">tree,form</field>
    </record>

    <!--carrier.supplier-->
    <record model="ir.ui.view" id="view_carrier_supplier_tree">
        <field name="name">carrier.supplier.tree</field>
        <field name="model">carrier.supplier</field>
        <field name="inherit_id" ref="green_logistic_carrier.view_carrier_supplier_tree"/>
        <field name="arch" type="xml">
            <field name="account_ref" position="before">
                <field name="mode" readonly="1"/>
                <field name="soap_connection_id" attrs="{'required': [('mode', '=', 'carrier')]}"/>
            </field>
        </field>
    </record>

    <menuitem name="Carrier SOAP" id="carrier_connection_soap_root_menu" parent="sale.menu_sale_config" sequence="20"/>
        <menuitem id="carrier_connection_soap_menu" parent="carrier_connection_soap_root_menu" action="carrier_connection_soap_action" sequence="10"/>
</odoo>
